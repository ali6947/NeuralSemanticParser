EXPERIMENT_DIR=/mnt/infonas/data/alirehan/semantic_parsing/smbop/try_train/experiments
PRESERVED_EXPERIMENTS=/mnt/infonas/data/alirehan/semantic_parsing/smbop/try_train/preserved_experiments

#ARCHIVE_DIR="/mnt/infonas/data/awasthi/semantic_parsing/smbop/pretrained_ckpts"
#ARCHIVE_DIR=$PRESERVED_EXPERIMENTS/rat_layers4_roberta_base_spider
#ARCHIVE_DIR="/mnt/infonas/data/awasthi/semantic_parsing/smbop/try_train/preserved_experiments/cbr_roberta_base"
#ARCHIVE_DIR="/mnt/infonas/data/awasthi/semantic_parsing/smbop/try_train/preserved_experiments/cbr_with_leafs"

#ARCHIVE_DIR=$PRESERVED_EXPERIMENTS/fixed_cbr_gold_ret_w_relu_dropout_norm
#ARCHIVE_DIR=$EXPERIMENT_DIR/cozy-champagne-kangaroo_rat_layers4_batch_size3_fixed_cbr_same_schema_uctx_gating_full_softmax
#ARCHIVE_DIR=$EXPERIMENT_DIR/craggy-khaki-harrier_rat_layers4_batch_size3_fixed_cbr_same_schema_gating_full_softmax
#ARCHIVE_DIR=$EXPERIMENT_DIR/chummy-peach-mastiff_rat_layers4_batch_size3_fixed_cbr_mixed_schema_w_full_softmax
#ARCHIVE_DIR=$EXPERIMENT_DIR/whiny-cream-cockroach_rat_layers4_batch_size3_fixed_cbr_gold_ret_w_full_softmax
#ARCHIVE_DIR=$EXPERIMENT_DIR/crabby-blue-tuatara_rat_layers4_batch_size3_fixed_cbr_same_schema_w_full_softmax
#ARCHIVE_DIR=$EXPERIMENT_DIR/craggy-khaki-harrier_rat_layers4_batch_size3_fixed_cbr_same_schema_gating_full_softmax
#ARCHIVE_DIR=$EXPERIMENT_DIR/cozy-champagne-kangaroo_rat_layers4_batch_size3_fixed_cbr_same_schema_uctx_gating_full_softmax

#ARCHIVE_DIR=$EXPERIMENT_DIR/sunny-magenta-mule_rat_layers4_batch_size3_cbr_same_schema_leafs_gating
#ARCHIVE_DIR=$EXPERIMENT_DIR/baggy-silver-scorpion_rat_layers4_batch_size3_enr_schema_smbop_parser
#ARCHIVE_DIR=$EXPERIMENT_DIR/woolly-cyan-wasp_rat_layers4_batch_size3_enr_schema_smbop_parser_wo_tok_sim
#ARCHIVE_DIR=$EXPERIMENT_DIR/snappy-rust-gharial_rat_layers4_batch_size2_grad_acum6_enr_schema_cbr
#ARCHIVE_DIR=$EXPERIMENT_DIR/slimy-crimson-flounder_rat_layers4_batch_size3_enr_schema_plus_cbr
#ARCHIVE_DIR=$EXPERIMENT_DIR/craggy-lemon-mammoth_rat_layers4_batch_size3_simplified_enr_schema_smbop_parser

#ARCHIVE_DIR=$EXPERIMENT_DIR/squirrely-dandelion-monkey_rat_layers4_lr1e-05_batch_size1_grad_acum1_ft_enr_schema_smbop_parser_world_1
#ARCHIVE_DIR=$EXPERIMENT_DIR/whiny-ivory-sparrow_rat_layers4_lr1e-05_batch_size8_grad_acum1_ft_smbop_world_1
#ARCHIVE_DIR=$EXPERIMENT_DIR/surly-scarlet-loon_rat_layers4_lr1e-05_batch_size1_grad_acum1_ft_enr_schema_smbop_parser_world_1
#ARCHIVE_DIR=$EXPERIMENT_DIR/slaphappy-taupe-stoat_rat_layers4_lr1e-05_batch_size8_grad_acum1_ft_smbop_synonymized_world_1
#ARCHIVE_DIR=$EXPERIMENT_DIR/sleepy-cerise-alligator_rat_layers4_lr1e-05_batch_size8_grad_acum1_ft_smbop_synonymized_world_1_800ep
#ARCHIVE_DIR=$EXPERIMENT_DIR/muggy-cyan-nightingale_rat_layers4_lr1e-05_batch_size8_grad_acum1_ft_smbop_canonicalized_world_1_800ep
#ARCHIVE_DIR=$EXPERIMENT_DIR/nerdy-magenta-giraffe_rat_layers4_lr1e-05_batch_size1_grad_acum1_ft_cbr_same_schema_leafs_gating_world_1
#ARCHIVE_DIR=$EXPERIMENT_DIR/slimy-ruby-chimpanzee_rat_layers4_lr1e-05_batch_size1_grad_acum1_ft_cbr_same_schema_leafs_gating_world_1_synonymized
#ARCHIVE_DIR=$EXPERIMENT_DIR/paltry-carmine-maltese_rat_layers4_lr1e-05_batch_size1_grad_acum1_ft_cbr_same_schema_leafs_gating_world_1_canonicalized

# 1410
#ARCHIVE_DIR=$EXPERIMENT_DIR/queasy-smalt-flamingo_rat_layers4_batch_size3_1410_enr_schema_smbop_parser
#ARCHIVE_DIR=$EXPERIMENT_DIR/shabby-brass-squirt_rat_layers4_batch_size6_grad_acum2_1410_enr_schema_smbop_parser_leaf_CBR
#ARCHIVE_DIR=$EXPERIMENT_DIR/blurry-goldenrod-horse_rat_layers4_batch_size6_grad_acum2_1410_enr_schema_self_schema
#ARCHIVE_DIR=$EXPERIMENT_DIR/shaky-khaki-sparrow_rat_layers4_batch_size3_1410_enr_schema_self_schema_without_schema_id_loss
#ARCHIVE_DIR=$EXPERIMENT_DIR/foggy-red-shark_rat_layers4_batch_size6_grad_acum2_1410_enr_schema_self_schema_CBR_leafs
#ARCHIVE_DIR=$EXPERIMENT_DIR/stealthy-eggplant-harrier_rat_layers4_batch_size6_grad_acum2_1410_enr_schema_self_schema_CBRV2_leafs
#ARCHIVE_DIR=$EXPERIMENT_DIR/cranky-aqua-cattle_rat_layers4_batch_size4_grad_acum3_1410_enr_schema_with_fixes
#ARCHIVE_DIR=$EXPERIMENT_DIR/skimpy-cinnabar-bulldog_rat_layers4_batch_size3_1410_enr_schema_with_fixes_wo_leafCBR
#ARCHIVE_DIR=$EXPERIMENT_DIR/shaky-wheat-tetra_rat_layers4_batch_size6_grad_acum2_1410_same_example_enrichment_only

# Augmented
#ARCHIVE_DIR=$EXPERIMENT_DIR/homey-rust-sheepdog_batch_size27_grad_acum3_vanilla_smbop_augmented
#ARCHIVE_DIR=$EXPERIMENT_DIR/slaphappy-purple-kingfisher_rat_layers4_batch_size4_grad_acum3_cbr_same_schema_wleafs_augmented
#ARCHIVE_DIR=$EXPERIMENT_DIR/shaky-buff-hound_rat_layers4_batch_size4_grad_acum3_enriched_augmented_with_max_gamma
#ARCHIVE_DIR=$EXPERIMENT_DIR/paltry-purple-audemer_rat_layers4_batch_size4_grad_acum3_cbr_wleafs_enriched_augmented
#ARCHIVE_DIR=$EXPERIMENT_DIR/sunny-green-swan_rat_layers4_batch_size6_grad_acum2_enriched_w_same_example_augmented
#ARCHIVE_DIR=$EXPERIMENT_DIR/skinny-champagne-maltese_rat_layers4_batch_size4_grad_acum3_cbr_w_leafs_enriched_w_same_example_augmented
#ARCHIVE_DIR=$EXPERIMENT_DIR/snippy-crimson-bear_rat_layers4_batch_size40_grad_acum2_vanilla_smbop_augmented_4RAT
#ARCHIVE_DIR=$EXPERIMENT_DIR/zippy-russet-sparrow_rat_layers4_batch_size4_grad_acum3_enriched_w_same_example_augmented_tree_cbr


# UnAugmented
#ARCHIVE_DIR=$EXPERIMENT_DIR/shaky-salmon-labradoodle_rat_layers4_batch_size6_grad_acum2_enriched_w_same_example_unaugmented
#ARCHIVE_DIR=$EXPERIMENT_DIR/pokey-red-serval_rat_layers4_batch_size4_grad_acum3_enriched_w_same_example_unaugmented_tree_cbr_maxpool
#ARCHIVE_DIR=$EXPERIMENT_DIR/cozy-sapphire-dollar_rat_layers4_batch_size6_grad_acum2_vanilla_smbop_same_schema_batching
#ARCHIVE_DIR=$EXPERIMENT_DIR/boozy-chestnut-heron_rat_layers4_batch_size6_grad_acum2_vanilla_smbop_same_schema_batching_1
#ARCHIVE_DIR=$EXPERIMENT_DIR/shaky-amethyst-tarantula_rat_layers4_batch_size1_grad_acum12_enriched_w_same_example_unaugmented_tree_cbr
# ARCHIVE_DIR=$PRESERVED_EXPERIMENTS/lovely-magnolia-bombay_rat_layers4_batch_size40_grad_acum2_vanilla_smbop_1
#ARCHIVE_DIR=$EXPERIMENT_DIR/queasy-blue-woodpecker_rat_layers4_batch_size4_grad_acum3_enriched_w_same_example_unaugmented_tree_cbr_score_drop_0.5
#ARCHIVE_DIR=$EXPERIMENT_DIR/scanty-khaki-pig_rat_layers4_batch_size4_grad_acum3_enriched_w_same_example_unaugmented_tree_cbr_1
#ARCHIVE_DIR=$EXPERIMENT_DIR/shaggy-buff-coyote_rat_layers4_batch_size4_grad_acum3_enriched_w_same_example_unaugmented_tree_cbr_op_norm
#ARCHIVE_DIR=$EXPERIMENT_DIR/bumpy-brass-loon_rat_layers4_batch_size4_grad_acum3_enriched_w_same_example_unaugmented_tree_cbr_softmax
#ARCHIVE_DIR=$EXPERIMENT_DIR/sunny-fuchsia-mule_rat_layers4_batch_size4_grad_acum3_enriched_w_same_example_unaugmented_tree_cbr_softmax_dotsim
#ARCHIVE_DIR=$EXPERIMENT_DIR/stealthy-sepia-jackal_rat_layers4_batch_size6_grad_acum2_enriched_w_same_example_unaugmented_tree_cbr_gating
#ARCHIVE_DIR=$EXPERIMENT_DIR/woolly-tangerine-rabbit_rat_layers4_batch_size4_grad_acum3_unaugmented_tree_cbr_wo_enrichment
#ARCHIVE_DIR=$EXPERIMENT_DIR/grumpy-mustard-cougar_rat_layers4_batch_size6_grad_acum2_tree_cbr_w_enr_mixed_schema_alpha_5_cossim
#ARCHIVE_DIR=$PRESERVED_EXPERIMENTS/flimsy-white-dragon_rat_layers4_batch_size4_grad_acum3_enriched_w_same_example_unaugmented_tree_cbr_1

# New Architecture
#ARCHIVE_DIR=$EXPERIMENT_DIR/skanky-olive-baboon_rat_layers4_batch_size40_grad_acum2_test_1
#ARCHIVE_DIR=$EXPERIMENT_DIR/messy-maroon-fousek_rat_layers4_batch_size40_grad_acum2_test_2
#ARCHIVE_DIR=$EXPERIMENT_DIR/flaky-olive-bulldog_rat_layers4_batch_size40_grad_acum2_test_3
#ARCHIVE_DIR=$EXPERIMENT_DIR/hasty-malachite-bear_rat_layers4_batch_size40_grad_acum2_test_4_log.txt


# BCE Losses
#ARCHIVE_DIR=$EXPERIMENT_DIR/pretty-peach-goat_rat_layers4_batch_size40_grad_acum2_vanilla_smbop_with_bce_at_all_level
#ARCHIVE_DIR=$EXPERIMENT_DIR/nerdy-seashell-tapir_cntx_beamTrue_rat_layers4_batch_size40_grad_acum2_vanilla_smbop_with_bce_at_all_level_cntx_beam


# CBR_IMPROVED
#ARCHIVE_DIR=$EXPERIMENT_DIR/snazzy-amaranth-whale_rat_layers4_batch_size4_grad_acum3_cbr_improved_ignore_keep_false_5K_logits
#ARCHIVE_DIR=$EXPERIMENT_DIR/snazzy-turquoise-barracuda_rat_layers4_batch_size4_grad_acum3_cbr_improved_ignore_keep_false_5K
#ARCHIVE_DIR=$EXPERIMENT_DIR/nippy-malachite-hippopotamus_rat_layers4_lr1e-05_batch_size2_grad_acum6_ft_cbr_improved_ignore_keep_false_5K
#ARCHIVE_DIR=$EXPERIMENT_DIR/bluesy-brown-lizard_rat_layers4_batch_size6_grad_acum2_cbr_improved_V2_cbr_sc_001
#ARCHIVE_DIR=$EXPERIMENT_DIR/gummy-orange-zebu_rat_layers4_batch_size4_grad_acum3_cbr_improved_entier_frontier_detached
#ARCHIVE_DIR=$EXPERIMENT_DIR/skimpy-lilac-penguin_rat_layers4_lr0.0001_batch_size6_grad_acum2_ft_cbr_improved_ent_front_no_enr
#ARCHIVE_DIR=$EXPERIMENT_DIR/snappy-ultramarine-zebu_rat_layers4_lr0.0001_batch_size4_grad_acum3_ft_cbr_improved_ent_front_no_enr
#ARCHIVE_DIR=$EXPERIMENT_DIR/grumpy-cornflower-neanderthal_rat_layers4_lr0.0001_batch_size4_grad_acum3_ft_cbr_improved_ent_front_no_enr_bce_losses
#ARCHIVE_DIR=$EXPERIMENT_DIR/dorky-auburn-monkey_rat_layers4_lr0.0001_batch_size1_grad_acum6_tx_cbr_improved_cs_15
#ARCHIVE_DIR=$EXPERIMENT_DIR/freaky-teal-urchin_rat_layers4_lr0.0001_batch_size1_grad_acum12_ft_cbr_improved_cbr_combined_bce_child_mask_cs_20
#ARCHIVE_DIR=$EXPERIMENT_DIR/stuffy-cream-caiman_rat_layers4_batch_size4_grad_acum3_tx_cbr_improved_cs_7_e2e
#ARCHIVE_DIR=$EXPERIMENT_DIR/pretty-tan-heron_rat_layers4_batch_size1_grad_acum12_tx_cbr_improved_cs_15_e2e_no_bce_combined
#ARCHIVE_DIR=$EXPERIMENT_DIR/tasty-bistre-grasshopper_rat_layers4_batch_size1_grad_acum12_tx_cbr_improved_cs_7_e2e_ft_cs_15
#ARCHIVE_DIR=$EXPERIMENT_DIR/scummy-malachite-hummingbird_rat_layers4_batch_size1_wo_tx_cbr_w_bce
#ARCHIVE_DIR=$EXPERIMENT_DIR/paltry-purple-wildebeest_rat_layers4_batch_size1_tx_cbr_wo_bce

# SSP
#ARCHIVE_DIR=$EXPERIMENT_DIR/craggy-dandelion-ibis_rat_layers4_batch_size4_grad_acum3_ssp_cbr_smbop_cosine
#ARCHIVE_DIR=$EXPERIMENT_DIR/flabby-harlequin-duck_rat_layers4_batch_size40_grad_acum2_ssp_tmcd_vanilla_smbop
#ARCHIVE_DIR=$EXPERIMENT_DIR/cranky-blue-stoat_rat_layers4_batch_size40_grad_acum2_ssp_length_vanilla_smbop
#ARCHIVE_DIR=$EXPERIMENT_DIR/snazzy-lilac-gecko_rat_layers4_batch_size40_grad_acum2_ssp_template_vanilla_smbop
#ARCHIVE_DIR=$EXPERIMENT_DIR/trippy-silver-seahorse_rat_layers4_batch_size4_grad_acum3_ssp_template_cbr_smbop_cosine
#ARCHIVE_DIR=$EXPERIMENT_DIR/cheeky-gold-chinchilla_rat_layers4_batch_size4_grad_acum3_ssp_length_cbr_smbop_cosine

# ORIG CBR
ARCHIVE_DIR="/mnt/infonas/data/alirehan/semantic_parsing/smbop/try_train/experiments/sleepy-aqua-wrasse/"

# PICKLE_DIR="/mnt/infonas/data/awasthi/semantic_parsing/smbop/kaggle-dbqa/cleaned_pickles"
# TABLE_DIR="/mnt/infonas/data/awasthi/semantic_parsing/smbop/kaggle-dbqa/cleaned_tables"
# DATABASE_DIR="/mnt/infonas/data/awasthi/semantic_parsing/smbop/kaggle-dbqa/databases"
# GOLD_SQL_DIR="/mnt/infonas/data/awasthi/semantic_parsing/smbop/kaggle-dbqa/gold_SQL"
#DB_NAME="GreaterManchesterCrime"

#SPIDER_PICKLE_DIR="/mnt/infonas/data/awasthi/semantic_parsing/smbop/pickles/spider_val_cbr_splits_30/split_2"
#SPIDER_PICKLE_DIR="/mnt/infonas/data/awasthi/semantic_parsing/smbop/pickles/noisy/seed_0/cbr_splits_30/split_0"
#SPIDER_PICKLE_DIR="/mnt/infonas/data/awasthi/semantic_parsing/smbop/pickles/spider_val_cbr_splits_30/split_0"

# for DB_NAME in world_1 car_1 cre_Doc_Template_Mgt dog_kennels flight_2
# do
#   output_preds=$ARCHIVE_DIR/synonymized_"$DB_NAME"_test_pred_30.sql
#   output_eval=$ARCHIVE_DIR/synonymized_"$DB_NAME"_test_pred_30.eval
#   output_infer=$ARCHIVE_DIR/synonymized_"$DB_NAME"_test_pred_30.infer
#   output_gold=$ARCHIVE_DIR/synonymized_"$DB_NAME"_test_pred_30.gold
#   echo 
#   echo $DB_NAME
#   echo
#   python3 -u eval_kaggledb.py \
#     --archive_dir=$ARCHIVE_DIR \
#     --dev_path=$SPIDER_PICKLE_DIR/$DB_NAME/test.pkl \
#     --table_path=dataset/tables.json \
#     --dataset_path=dataset/database \
#     --output=$output_preds \
#     --output_gold=$output_gold \
#     --cases=$SPIDER_PICKLE_DIR/$DB_NAME/train.pkl > $output_eval

#   echo >> $output_eval 

#   python3 -u smbop/eval_final/evaluation.py \
#     --gold $SPIDER_PICKLE_DIR/$DB_NAME/test.sql  \
#     --pred $output_preds \
#     --etype all \
#     --db  dataset/database  \
#     --table dataset/tables.json >> $output_eval
# done

RESULTS="results"
for split_size in 30
do
  for split_id in 0 1 2
  do
    for DB_NAME in world_1 car_1 cre_Doc_Template_Mgt dog_kennels flight_2
    do
      # for fname in train test val
      # do
      # cp /mnt/infonas/data/awasthi/semantic_parsing/smbop/pickles/spider_val_cbr_splits_"$split_size"/split_"$split_id"/"$DB_NAME"/"$fname".ques /mnt/infonas/data/alirehan/semantic_parsing/pickle_objs/bigbird_base/spider_val_cbr_splits_"$split_size"/split_"$split_id"/"$DB_NAME"/"$fname".ques

      # cp /mnt/infonas/data/awasthi/semantic_parsing/smbop/pickles/spider_val_cbr_splits_"$split_size"/split_"$split_id"/"$DB_NAME"/"$fname".sql /mnt/infonas/data/alirehan/semantic_parsing/pickle_objs/bigbird_base/spider_val_cbr_splits_"$split_size"/split_"$split_id"/"$DB_NAME"/"$fname".sql


      SPIDER_PICKLE_DIR=/mnt/infonas/data/alirehan/semantic_parsing/pickle_objs/bigbird_base/spider_val_cbr_splits_"$split_size"/split_"$split_id"
      output_preds=$RESULTS/bigbird_splits_v1_vanilla_mix_rand_5o10_cases/beam_spider_"$DB_NAME"_SPLIT_"$split_id"_CS_"$split_size"_test_pred.sql
      output_eval=$RESULTS/bigbird_splits_v1_vanilla_mix_rand_5o10_cases/beam_spider_"$DB_NAME"_SPLIT_"$split_id"_CS_"$split_size"_test_pred.eval
      output_infer=$RESULTS/bigbird_splits_v1_vanilla_mix_rand_5o10_cases/beam_spider_"$DB_NAME"_SPLIT_"$split_id"_CS_"$split_size"_test_pred.infer
      output_gold=$RESULTS/bigbird_splits_v1_vanilla_mix_rand_5o10_cases/beam_spider_"$DB_NAME"_SPLIT_"$split_id"_CS_"$split_size"_test_pred.gold
      echo 
      echo $DB_NAME $split_id $split_size
      echo
      python3 -u eval_kaggledb_beam_orig_cbr.py \
        --archive_dir=$ARCHIVE_DIR \
        --dev_path=$SPIDER_PICKLE_DIR/$DB_NAME/test_w_top5_cases_from_train_no_leaf_thresh_gt_0.7.pkl \
        --table_path=dataset/tables.json \
        --dataset_path=dataset/database \
        --output=$output_preds \
        --output_gold=$output_gold > $output_eval #\
        #--cases=$SPIDER_PICKLE_DIR/$DB_NAME/train.pkl > $output_eval

      echo >> $output_eval 
      echo >> $output_eval 

      python3 -u smbop/eval_final/evaluation.py \
        --gold $output_gold  \
        --pred $output_preds \
        --etype all \
        --db  dataset/database  \
        --table dataset/tables.json >> $output_eval
    # done
    done
  done
done

# for DB_NAME in world_1 car_1 cre_Doc_Template_Mgt dog_kennels flight_2
# do
#   output_preds=$ARCHIVE_DIR/test.sql
#   output_eval=$ARCHIVE_DIR/test.eval
#   output_infer=$ARCHIVE_DIR/test.infer
#   output_gold=$ARCHIVE_DIR/test.gold
#   echo 
#   echo $DB_NAME
#   echo
#   python3 -u eval_kaggledb_beam.py \
#     --archive_dir=$ARCHIVE_DIR \
#     --dev_path=$SPIDER_PICKLE_DIR/$DB_NAME/test.pkl \
#     --table_path=dataset/tables.json \
#     --dataset_path=dataset/database \
#     --output=$output_preds \
#     --output_gold=$output_gold \
#     --cases=$SPIDER_PICKLE_DIR/$DB_NAME/train.pkl #> $output_eval

#   # echo >> $output_eval 
#   # echo >> $output_eval 

#   # python3 -u smbop/eval_final/evaluation.py \
#   #   --gold $SPIDER_PICKLE_DIR/$DB_NAME/test.sql  \
#   #   --pred $output_preds \
#   #   --etype all \
#   #   --db  dataset/database  \
#   #   --table dataset/tables.json >> $output_eval
# done


# output_preds=scratch/temp_synon.sql
# output_eval=scratch/temp_synon.eval
# python3 eval_kaggledb.py \
#   --archive_dir=$ARCHIVE_DIR \
#   --dev_path=pickles/noisy/seed_0/noisy_spider_val_instances_with_samedb_cases.pkl \
#   --table_path=dataset/noisy_schema/seed_0/tables.json \
#   --dataset_path=dataset/database \
#   --output=$output_preds \

# python3 smbop/eval_final/evaluation.py \
#   --gold dataset/dev_gold_filtered.sql  \
#   --pred $output_preds \
#   --etype match \
#   --db  dataset/database  \
#   --table dataset/noisy_schema/seed_0/tables.json #> $output_eval

# output_preds=scratch/temp_canon.sql
# output_eval=scratch/temp_canon.eval
# python3 eval_kaggledb.py \
#   --archive_dir=$ARCHIVE_DIR \
#   --dev_path=pickles/noisy/canonicalized/spider_val_instances_with_samedb_cases.pkl \
#   --table_path=dataset/noisy_schema/canonicalized_tables.json \
#   --dataset_path=dataset/database \
#   --output=$output_preds \

# python3 smbop/eval_final/evaluation.py \
#   --gold dataset/dev_gold_filtered.sql  \
#   --pred $output_preds \
#   --etype match \
#   --db  dataset/database  \
#   --table dataset/noisy_schema/canonicalized_tables.json #> $output_eval

# output_preds=scratch/temp.sql
# output_eval=scratch/temp.eval
# python3 eval_kaggledb.py \
#   --archive_dir=$ARCHIVE_DIR \
#   --dev_path=pickles/noisy/canonicalized/cbr_splits/split_0/world_1/test.pkl \
#   --table_path=dataset/noisy_schema/canonicalized_tables.json \
#   --dataset_path=dataset/database \
#   --output=$output_preds \
#   --cases=pickles/noisy/canonicalized/cbr_splits/split_0/world_1/train.pkl

# python3 smbop/eval_final/evaluation.py \
#   --gold pickles/noisy/canonicalized/cbr_splits/split_0/world_1/test.sql  \
#   --pred $output_preds \
#   --etype match \
#   --db  dataset/database  \
#   --table dataset/noisy_schema/canonicalized_tables.json #> $output_eval

# output_preds=scratch/temp_1.sql
# output_eval=scratch/temp_1.eval
# python3 eval_kaggledb.py \
#   --archive_dir=$ARCHIVE_DIR \
#   --dev_path=pickles/noisy/seed_0/cbr_splits/split_0/world_1/test.pkl \
#   --table_path=dataset/noisy_schema/seed_0/tables.json \
#   --dataset_path=dataset/database \
#   --output=$output_preds \
#   --cases=pickles/noisy/seed_0/cbr_splits/split_0/world_1/train.pkl

# python3 smbop/eval_final/evaluation.py \
#   --gold pickles/noisy/seed_0/cbr_splits/split_0/world_1/test.sql  \
#   --pred $output_preds \
#   --etype match \
#   --db  dataset/database  \
#   --table dataset/noisy_schema/seed_0/tables.json #> $output_eval


# output_preds=scratch/temp_spider_1.sql
# output_eval=scratch/temp_spider_1.eval
# output_gold=scratch/tmp_spider_1.gold
# python3 eval_kaggledb.py \
#   --archive_dir=$ARCHIVE_DIR \
#   --dev_path=pickles/all_InstanceObj_spider_val_grappa_with_cases.pkl \
#   --table_path=dataset/tables.json \
#   --dataset_path=dataset/database \
#   --output=$output_preds \
#   --output_gold=$output_gold #\
# #  --cases=pickles/all_InstanceObj_spider_val_grappa_with_cases.pkl

# python3 smbop/eval_final/evaluation.py \
#   --gold $output_gold  \
#   --pred $output_preds \
#   --etype match \
#   --db  dataset/database  \
#   --table dataset/tables.json #> $output_eval


# output_preds=scratch/temp_kaggledb_noisy_1.sql
# output_eval=scratch/temp_kaggledb_noisy_1.eval
# output_gold=scratch/temp_kaggledb_noisy_gold_1.sql
# python3 eval_kaggledb.py \
#   --archive_dir=$ARCHIVE_DIR \
#   --dev_path=kaggle-dbqa-processed/pickles/all_kaggle_inst_w_cases.pkl \
#   --table_path kaggle-dbqa-processed/tables/all_tables.json \
#   --dataset_path kaggle-dbqa-processed/databases \
#   --output=$output_preds \
#   --output_gold=$output_gold

# python3 smbop/eval_final/evaluation.py \
#   --gold $output_gold \
#   --pred $output_preds \
#   --etype match \
#   --db  kaggle-dbqa-processed/databases  \
#   --table kaggle-dbqa-processed/tables/all_tables.json #> $output_eval


# output_preds=scratch/temp_kaggledb_cleaned.sql
# output_eval=scratch/temp_kaggledb_cleaned.eval
# output_gold=scratch/temp_kaggledb_cleaned_gold.sql
# python3 eval_kaggledb.py \
#   --archive_dir=$ARCHIVE_DIR \
#   --dev_path=kaggle-dbqa-processed/cleaned_pickles/all_kaggle_inst_w_cases.pkl \
#   --table_path kaggle-dbqa-processed/cleaned_tables/all_tables.json \
#   --dataset_path kaggle-dbqa-processed/databases \
#   --output=$output_preds \
#   --output_gold=$output_gold

# python3 smbop/eval_final/evaluation.py \
#   --gold $output_gold \
#   --pred $output_preds \
#   --etype match \
#   --db  kaggle-dbqa-processed/databases  \
#   --table kaggle-dbqa-processed/cleaned_tables/all_tables.json


# output_preds=scratch/temp_ssp.sql
# output_eval=scratch/temp_ssp.eval
# output_gold=scratch/tmp_ssp.gold
# python3 eval_kaggledb.py \
#   --archive_dir=$ARCHIVE_DIR \
#   --dev_path=pickles/spider_ssp/splits/tmcd_1/tmcd_1_test_aug_train_samedb.pkl \
#   --table_path=dataset/tables.json \
#   --dataset_path=dataset/database \
#   --output=$output_preds \
#   --output_gold=$output_gold #\
# #  --cases=pickles/all_InstanceObj_spider_val_grappa_with_cases.pkl

# python3 smbop/eval_final/evaluation.py \
#   --gold $output_gold  \
#   --pred $output_preds \
#   --etype match \
#   --db  dataset/database  \
#   --table dataset/tables.json #> $output_eval





# for DB_NAME in Pesticide #GeoNuclearData #GreaterManchesterCrime Pesticide
# do
#   output_preds=scratch/tmp.sql
#   output_eval=scratch/tmp.eval
#   echo 
#   echo $DB_NAME
#   echo
#   python3 eval_kaggledb.py \
#     --archive_dir=$ARCHIVE_DIR \
#     --dev_path=$PICKLE_DIR/"$DB_NAME"_test.pkl \
#     --table_path=$TABLE_DIR/"$DB_NAME".json \
#     --dataset_path=$DATABASE_DIR \
#     --output=$output_preds \
#     --cases=$PICKLE_DIR/"$DB_NAME"_fewshot.pkl

#   # python3 smbop/eval_final/evaluation.py \
#   #   --gold $GOLD_SQL_DIR/"$DB_NAME"_test_gold.sql  \
#   #   --pred $output_preds \
#   #   --etype all \
#   #   --db  $DATABASE_DIR  \
#   #   --table $TABLE_DIR/"$DB_NAME".json #> full_train_passed.eval 
# done

#for DB_NAME in GeoNuclearData GreaterManchesterCrime Pesticide
# for DB_NAME in mini_spider_val
# do
#   output_preds=scratch/tmp.sql
#   output_eval=scratch/tmp.eval
#   echo 
#   echo $DB_NAME
#   echo
#   python3 eval_kaggledb.py \
#     --archive_dir=$ARCHIVE_DIR \
#     --dev_path=/mnt/infonas/data/awasthi/semantic_parsing/smbop/scratch/mini_spider_val.pkl \
#     --table_path=dataset/tables.json \
#     --dataset_path=dataset/database \
#     --output=$output_preds \
#     --cases=/mnt/infonas/data/awasthi/semantic_parsing/smbop/scratch/mini_spider_val.pkl

#   python3 smbop/eval_final/evaluation.py \
#     --gold /mnt/infonas/data/awasthi/semantic_parsing/smbop/scratch/mini_spider_val.sql  \
#     --pred $output_preds \
#     --etype all \
#     --db  dataset/database  \
#     --table dataset/tables.json #> full_train_passed.eval 

#   # python3 smbop/eval_final/evaluation.py \
#   #   --gold /mnt/infonas/data/awasthi/semantic_parsing/smbop/scratch/full_train_failed_gold.sql  \
#   #   --pred /mnt/infonas/data/awasthi/semantic_parsing/smbop/scratch/full_train_failed_pred.sql \
#   #   --etype all \
#   #   --db  dataset/database  \
#   #   --table dataset/tables.json #> full_train_failed.eval
# done
